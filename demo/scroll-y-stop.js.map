{"version":3,"sources":["webpack:///webpack/bootstrap 38cd7ee3e8e3299a9b40","webpack:///./src/index.js","webpack:///./src/scroll-y-stop.js"],"names":["ScrollStop","elm","sleep","limit","_elm","_sleep","_limit","__PRODUCTION__","_log","msg","window","console","log","_observerListener","evt","_observer","_scrollListener","_preventDefault","_stopping","_setObservers","_lastIsInview","_isInview","_y","Modernizr","passiveeventlisteners","_listener_opt","passive","addEventListener","_interval","setInterval","removeEventListener","clearInterval","msec","_disableScroll","then","_enableScroll","dispatchEvent","Event","bubbles","_removeObservers","stageHeight","Math","max","document","documentElement","clientHeight","innerHeight","bounds","getBoundingClientRect","top","bottom","height","isInview","preventDefault","returnValue","scrollY","scrollTo","scrollX","_request","disableScrollByRAF","requestAnimationFrame","Promise","resolve","reject","setTimeout","cancelAnimationFrame"],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;ACtCA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA,IAAG;AACH,EAAC;;;;;;;;;;;;;;;;;ACpBD;;;;;;AAMA;KACqBA,U;AAEnB,uBAAYC,GAAZ,EAAiBC,KAAjB,EAAkC;AAAA;;AAAA,SAAVC,KAAU,yDAAF,CAAE;;AAAA;;AAChC,UAAKC,IAAL,GAAYH,GAAZ;AACA,UAAKI,MAAL,GAAcH,KAAd;AACA,UAAKI,MAAL,GAAcH,KAAd;AACA,SAAG,OAAOI,cAAP,KAA0B,WAA7B,EAAyC;AACvC,YAAKC,IAAL,GAAY,UAACC,GAAD;AAAA,gBAASC,OAAOC,OAAP,CAAeC,GAAf,CAAmBH,GAAnB,CAAT;AAAA,QAAZ;AACD,MAFD,MAEK;AACH,YAAKD,IAAL,GAAY,UAACC,GAAD,EAAS;AAAC;AAAQ,QAA9B;AACD;AACD,UAAKI,iBAAL,GAAyB,UAACC,GAAD;AAAA,cAAS,MAAKC,SAAL,CAAeD,GAAf,CAAT;AAAA,MAAzB;AACA,UAAKE,eAAL,GAAuB,UAACF,GAAD;AAAA,cAAS,MAAKG,eAAL,CAAqBH,GAArB,CAAT;AAAA,MAAvB;AACA,UAAKI,SAAL,GAAiB,KAAjB;AACA,UAAKC,aAAL;AACA,UAAKC,aAAL,GAAqB,KAAKC,SAAL,EAArB;AACA,UAAKC,EAAL,GAAU,CAAV;AACA,SAAGZ,OAAOa,SAAP,IAAoBb,OAAOa,SAAP,CAAiBC,qBAAxC,EAA8D;AAC5D,YAAKC,aAAL,GAAqB,EAACC,SAAS,IAAV,EAArB;AACD,MAFD,MAEK;AACH,YAAKD,aAAL,GAAqB,KAArB;AACD;AACF;;;;qCAEc;AACb,YAAKjB,IAAL,CAAU,eAAV;AACAE,cAAOiB,gBAAP,CAAwB,QAAxB,EAAkC,KAAKd,iBAAvC,EAA0D,KAAKY,aAA/D;AACAf,cAAOiB,gBAAP,CAAwB,OAAxB,EAAiC,KAAKd,iBAAtC,EAAyD,KAAKY,aAA9D;AACAf,cAAOiB,gBAAP,CAAwB,WAAxB,EAAqC,KAAKd,iBAA1C,EAA6D,KAAKY,aAAlE;AACAf,cAAOiB,gBAAP,CAAwB,YAAxB,EAAsC,KAAKd,iBAA3C,EAA8D,KAAKY,aAAnE;AACA,YAAKG,SAAL,GAAiBlB,OAAOmB,WAAP,CAAmB,KAAKhB,iBAAxB,EAA2C,GAA3C,CAAjB;AACD;;;wCAEiB;AAChB,YAAKL,IAAL,CAAU,kBAAV;AACAE,cAAOoB,mBAAP,CAA2B,QAA3B,EAAqC,KAAKjB,iBAA1C,EAA6D,KAAKY,aAAlE;AACAf,cAAOoB,mBAAP,CAA2B,OAA3B,EAAoC,KAAKjB,iBAAzC,EAA4D,KAAKY,aAAjE;AACAf,cAAOoB,mBAAP,CAA2B,WAA3B,EAAwC,KAAKjB,iBAA7C,EAAgE,KAAKY,aAArE;AACAf,cAAOoB,mBAAP,CAA2B,YAA3B,EAAyC,KAAKjB,iBAA9C,EAAiE,KAAKY,aAAtE;AACAf,cAAOqB,aAAP,CAAqB,KAAKH,SAA1B;AACD;;;+BAESd,G,EAAI;AAAA;;AACZ,WAAG,KAAKI,SAAL,IAAkB,KAAKE,aAAL,KAAuB,KAAKC,SAAL,EAA5C,EAA6D;AAC3D;AACD;AACD,YAAKD,aAAL,GAAqB,KAAKC,SAAL,EAArB;AACA,WAAG,KAAKD,aAAL,IAAsB,KAAKd,MAAL,GAAc,CAAvC,EAAyC;AACvC,aAAI0B,OAAO,KAAK3B,MAAL,GAAc,IAAzB;AACA,cAAK4B,cAAL,CAAoBD,IAApB,EAA0BE,IAA1B,CAA+B;AAAA,kBAAM,OAAKC,aAAL,EAAN;AAAA,UAA/B;AACA,cAAKf,aAAL,GAAqB,IAArB;AACA,cAAKd,MAAL,IAAe,CAAf;AACA,cAAKE,IAAL,CAAU,yBAAyB,KAAKF,MAAxC;AACD;AACD,WAAG,KAAKA,MAAL,IAAe,CAAlB,EAAoB;AAClB,cAAKF,IAAL,CAAUgC,aAAV,CAAwB,IAAIC,KAAJ,CAAU,oBAAV,EAAgC,EAACC,SAAS,IAAV,EAAhC,CAAxB;AACA,cAAKC,gBAAL;AACD;AACF;;;iCAEU;AACT,YAAK/B,IAAL,CAAU,WAAV;AACA,WAAIgC,cAAcC,KAAKC,GAAL,CAASC,SAASC,eAAT,CAAyBC,YAAlC,EAAgDnC,OAAOoC,WAAP,IAAsB,CAAtE,CAAlB;AACA,WAAIC,SAAS,KAAK3C,IAAL,CAAU4C,qBAAV,EAAb;AACA,WAAIC,MAAMF,OAAOE,GAAjB;AACA,WAAIC,SAASH,OAAOE,GAAP,GAAaF,OAAOI,MAAjC;AACA,YAAK3C,IAAL,CAAU,SAASyC,GAAT,GAAe,UAAf,GAA4BC,MAA5B,GAAqC,gBAArC,GAAwDV,WAAlE;AACA,WAAIY,WAAWH,OAAO,CAAP,IAAYC,SAASV,WAApC;AACA,YAAKhC,IAAL,CAAU,gBAAgB4C,QAA1B;AACA,cAAOA,QAAP;AACD;;;qCAEetC,G,EAAI;AAClB,YAAKN,IAAL,CAAU,iBAAV;AACAM,WAAIuC,cAAJ;AACAvC,WAAIwC,WAAJ,GAAkB,KAAlB;AACD;;;oCAEcpD,K,EAAM;AAAA;;AACnB,YAAKM,IAAL,CAAU,0BAA0BN,KAA1B,GAAkC,IAA5C;AACA,YAAKoB,EAAL,GAAU,KAAKA,EAAL,GAAU,CAAV,GAAc,KAAKA,EAAnB,GAAwBZ,OAAO6C,OAAzC;AACA7C,cAAO8C,QAAP,CAAgB9C,OAAO+C,OAAvB,EAAgC,KAAKnC,EAArC;AACA,YAAKoC,QAAL,GAAgB,IAAhB;AACA,WAAIC,qBAAqB,SAArBA,kBAAqB,GAAM;AAC7BjD,gBAAO8C,QAAP,CAAgB9C,OAAO+C,OAAvB,EAAgC,OAAKnC,EAArC;AACA,gBAAKoC,QAAL,GAAgBhD,OAAOkD,qBAAP,CAA6BD,kBAA7B,CAAhB;AACD,QAHD;AAIA,YAAKD,QAAL,GAAgBhD,OAAOkD,qBAAP,CAA6BD,kBAA7B,CAAhB;AACAjD,cAAOiB,gBAAP,CAAwB,OAAxB,EAAiC,KAAKX,eAAtC,EAAuD,KAAvD;AACAN,cAAOiB,gBAAP,CAAwB,WAAxB,EAAqC,KAAKX,eAA1C,EAA2D,KAA3D;AACA,YAAKE,SAAL,GAAiB,IAAjB;AACA,YAAKd,IAAL,CAAUgC,aAAV,CAAwB,IAAIC,KAAJ,CAAU,gBAAV,EAA4B,EAACC,SAAS,IAAV,EAA5B,CAAxB;AACA,cAAO,IAAIuB,OAAJ,CAAY,UAASC,OAAT,EAAkBC,MAAlB,EAAyB;AAC1CC,oBAAWF,OAAX,EAAoB5D,KAApB;AACD,QAFM,CAAP;AAGD;;;qCAEc;AACb,YAAKM,IAAL,CAAU,eAAV;AACAE,cAAOuD,oBAAP,CAA4B,KAAKP,QAAjC;AACA,YAAKpC,EAAL,GAAU,CAAV;AACAZ,cAAOoB,mBAAP,CAA2B,OAA3B,EAAoC,KAAKd,eAAzC,EAA0D,KAA1D;AACAN,cAAOoB,mBAAP,CAA2B,WAA3B,EAAwC,KAAKd,eAA7C,EAA8D,KAA9D;AACA,YAAKE,SAAL,GAAiB,KAAjB;AACA,YAAKd,IAAL,CAAUgC,aAAV,CAAwB,IAAIC,KAAJ,CAAU,eAAV,EAA2B,EAACC,SAAS,IAAV,EAA3B,CAAxB;AACD;;;;;;mBAzGkBtC,U","file":"demo/scroll-y-stop.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 38cd7ee3e8e3299a9b40\n **/","/**\n * ScrollStop trigger function\n * @author Eiji Kuroda\n * @license Apache-2.0\n * Stop Scrolling when the target element appear in viewport.\n */\n\n// import ScrollStop from './scroll-y-stop.js';\n\nvar ScrollStop = require('./scroll-y-stop.js').default;\n\ndocument.addEventListener('DOMContentLoaded', function(){\n  var target = document.querySelector('#target');\n  var ss = new ScrollStop(target, 1.0, 5);\n  target.addEventListener('scrollDisabled', function(){\n    target.style.backgroundColor = '#FFFF00';\n  }, false);\n  target.addEventListener('scrollEnabled', function(){\n    target.style.backgroundColor = '#00FF99';\n  }, false);\n}, false);\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/index.js\n ** module id = 0\n ** module chunks = 0\n **/","/**\n * ScrollStop module\n * @author Eiji Kuroda\n * @license Apache-2.0\n * Stop Scrolling when the target element appear in viewport.\n */\n/* globals $sf , __PRODUCTION__ */\nexport default class ScrollStop{\n\n  constructor(elm, sleep, limit = 1){\n    this._elm = elm;\n    this._sleep = sleep;\n    this._limit = limit;\n    if(typeof __PRODUCTION__ === 'undefined'){\n      this._log = (msg) => window.console.log(msg);\n    }else{\n      this._log = (msg) => {return;};\n    }\n    this._observerListener = (evt) => this._observer(evt);\n    this._scrollListener = (evt) => this._preventDefault(evt);\n    this._stopping = false;\n    this._setObservers();\n    this._lastIsInview = this._isInview();\n    this._y = 0;\n    if(window.Modernizr && window.Modernizr.passiveeventlisteners){\n      this._listener_opt = {passive: true};\n    }else{\n      this._listener_opt = false;\n    }\n  }\n\n  _setObservers(){\n    this._log('_setObservers');\n    window.addEventListener('scroll', this._observerListener, this._listener_opt);\n    window.addEventListener('wheel', this._observerListener, this._listener_opt);\n    window.addEventListener('touchmove', this._observerListener, this._listener_opt);\n    window.addEventListener('touchstart', this._observerListener, this._listener_opt);\n    this._interval = window.setInterval(this._observerListener, 500);\n  }\n\n  _removeObservers(){\n    this._log('_removeObservers');\n    window.removeEventListener('scroll', this._observerListener, this._listener_opt);\n    window.removeEventListener('wheel', this._observerListener, this._listener_opt);\n    window.removeEventListener('touchmove', this._observerListener, this._listener_opt);\n    window.removeEventListener('touchstart', this._observerListener, this._listener_opt);\n    window.clearInterval(this._interval);\n  }\n\n  _observer(evt){\n    if(this._stopping || this._lastIsInview === this._isInview()){\n      return;\n    }\n    this._lastIsInview = this._isInview();\n    if(this._lastIsInview && this._limit > 0){\n      let msec = this._sleep * 1000;\n      this._disableScroll(msec).then(() => this._enableScroll());\n      this._lastIsInview = true;\n      this._limit -= 1;\n      this._log('Remain Stop Count : ' + this._limit);\n    }\n    if(this._limit <= 0){\n      this._elm.dispatchEvent(new Event('scrollStopCanceled', {bubbles: true}));\n      this._removeObservers();\n    }\n  }\n\n  _isInview(){\n    this._log('_isInview');\n    var stageHeight = Math.max(document.documentElement.clientHeight, window.innerHeight || 0);\n    var bounds = this._elm.getBoundingClientRect();\n    var top = bounds.top;\n    var bottom = bounds.top + bounds.height;\n    this._log('top:' + top + ',bottom:' + bottom + ', stageHeight:' + stageHeight);\n    var isInview = top >= 0 && bottom < stageHeight;\n    this._log('isInview : ' + isInview);\n    return isInview;\n  }\n\n  _preventDefault(evt){\n    this._log('_preventDefault');\n    evt.preventDefault();\n    evt.returnValue = false;\n  }\n\n  _disableScroll(sleep){\n    this._log('_disableScroll sleep:' + sleep + 'ms');\n    this._y = this._y > 0 ? this._y : window.scrollY;\n    window.scrollTo(window.scrollX, this._y);\n    this._request = null;\n    var disableScrollByRAF = () => {\n      window.scrollTo(window.scrollX, this._y);\n      this._request = window.requestAnimationFrame(disableScrollByRAF);\n    };\n    this._request = window.requestAnimationFrame(disableScrollByRAF);\n    window.addEventListener('wheel', this._scrollListener, false);\n    window.addEventListener('touchmove', this._scrollListener, false);\n    this._stopping = true;\n    this._elm.dispatchEvent(new Event('scrollDisabled', {bubbles: true}));\n    return new Promise(function(resolve, reject){\n      setTimeout(resolve, sleep);\n    });\n  }\n\n  _enableScroll(){\n    this._log('_enableScroll');\n    window.cancelAnimationFrame(this._request);\n    this._y = 0;\n    window.removeEventListener('wheel', this._scrollListener, false);\n    window.removeEventListener('touchmove', this._scrollListener, false);\n    this._stopping = false;\n    this._elm.dispatchEvent(new Event('scrollEnabled', {bubbles: true}));\n  }\n\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/scroll-y-stop.js\n **/"],"sourceRoot":""}